{{ define "title" }}{{.PrettyName}} - AppBundleHUB{{ end }}

{{ define "content" }}
<div class="navbar bg-base-200 shadow-lg sticky top-0 z-30">
    <div class="navbar-start">
        <a href="../../../index.html" class="btn btn-ghost">‚Ü© Back</a>
    </div>
    <div class="navbar-center">
        <a href="../../../index.html" class="btn btn-ghost normal-case text-xl">AppBundleHUB</a>
    </div>
    <div class="navbar-end">
        <div class="dropdown dropdown-end">
            <label tabindex="0" class="btn btn-ghost btn-circle"><span id="theme-icon">üåû</span></label>
            <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow-2xl bg-base-300 rounded-box w-52">
                <li><a data-theme-value="auto">üîÑ Auto</a></li>
                <li><a data-theme-value="light">üåû Light</a></li>
                <li><a data-theme-value="dark">üåô Dark</a></li>
            </ul>
        </div>
    </div>
</div>

<div class="container mx-auto px-4 py-8">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <div class="lg:col-span-3">
            <div class="flex flex-col sm:flex-row gap-6 items-center bg-base-200 p-6 rounded-box shadow-lg">
                <div class="skeleton rounded-lg app-icon" id="app-icon-skeleton"></div>
                <img src="{{.Icon}}" alt="{{.PrettyName}}" class="app-icon object-contain rounded-lg"
                     onload="document.getElementById('app-icon-skeleton').style.display='none';" />
                <div class="text-center sm:text-left">
                    <h1 class="text-3xl font-bold">{{.PrettyName}}</h1>
                    <div class="flex flex-wrap gap-1 mt-2">
                        {{if .Categories}}
                        {{range splitCategories .Categories}}
                        <a href="../../../categories/{{.}}/index.html" class="badge badge-outline">{{.}}</a>
                        {{end}}
                        {{end}}
                        <span class="badge badge-outline" title="{{.RepoURL}}">{{.RepoName}}</span>
                    </div>
                    <div class="flex flex-wrap gap-4 mt-3">
                        <div class="tooltip" data-tip="Version">
                            <span class="flex items-center gap-1">üìå {{.Version}}</span>
                        </div>
                        <div class="tooltip" data-tip="Size">
                            <span class="flex items-center gap-1">üì¶ {{.Size}}</span>
                        </div>
                    </div>
                </div>
                <div class="ml-auto flex flex-col sm:flex-row gap-3">
                    <a href="dbin://ask/install/{{.Name | encodeURI}}#{{.PkgId | encodeURI}}" class="btn btn-primary tooltip" data-tip="dbin://ask/ protocol needed!">
                        ‚ö° Install
                    </a>
                    {{if .AlternativeVersions}}
                    <div class="dropdown dropdown-end">
                        <label tabindex="0" class="btn btn-outline">üîÑ Other Versions</label>
                        <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow-2xl bg-base-300 rounded-box w-64">
                            {{range .AlternativeVersions}}
                            <li><a href="../../../{{.RepoName}}/{{.Name}}/{{.PkgId}}/index.html">{{.PkgId}} ({{.Version}})</a></li>
                            {{end}}
                        </ul>
                    </div>
                    {{end}}
                </div>
            </div>
        </div>

        <div class="lg:col-span-2">
            <div class="card bg-base-200 shadow-lg">
                <div class="card-body">
                    <h2 class="card-title">Screenshots</h2>
                    {{if .Screenshots}}
                    <div class="carousel w-full rounded-box">
                        {{range $index, $screenshot := .Screenshots}}
                        <div id="slide{{$index}}" class="carousel-item relative w-full">
                            <div class="skeleton w-full h-80 rounded-lg"></div>
                            <img src="{{$screenshot}}" alt="Screenshot {{$index}}"
                                 class="w-full h-80 object-contain"
                                 onload="this.previousElementSibling.style.display='none';" />
                            <div class="absolute flex justify-between transform -translate-y-1/2 left-5 right-5 top-1/2">
                                {{if eq $index 0}}
                                <a href="#slide{{len $.Screenshots | dec}}" class="btn btn-circle">‚ùÆ</a>
                                {{else}}
                                <a href="#slide{{$index | dec}}" class="btn btn-circle">‚ùÆ</a>
                                {{end}}
                                {{if eq $index (len $.Screenshots | dec)}}
                                <a href="#slide0" class="btn btn-circle">‚ùØ</a>
                                {{else}}
                                <a href="#slide{{$index | inc}}" class="btn btn-circle">‚ùØ</a>
                                {{end}}
                            </div>
                        </div>
                        {{end}}
                    </div>
                    <div class="flex justify-center w-full py-2 gap-2">
                        {{range $index, $screenshot := .Screenshots}}
                        <a href="#slide{{$index}}" class="btn btn-xs">{{inc $index}}</a>
                        {{end}}
                    </div>
                    {{else}}
                    <div class="alert alert-info shadow-lg">
                        <span>‚ÑπÔ∏è No screenshots available for this application.</span>
                    </div>
                    {{end}}
                </div>
            </div>
        </div>

        <div class="lg:col-span-1">
            <div class="card bg-base-200 shadow-lg">
                <div class="card-body">
                    <h2 class="card-title">Details</h2>
                    <div class="overflow-x-auto">
                        <table class="table table-zebra">
                            <tbody>
                                <tr><td class="font-bold">Package Name</td><td>{{.Name}}</td></tr>
                                <tr><td class="font-bold">Package ID</td><td>{{.PkgId}}</td></tr>
                                <tr><td class="font-bold">Build Date</td><td>{{.BuildDate}}</td></tr>
                                <tr>
                                    <td class="font-bold">License</td>
                                    <td>
                                        {{range .License}}
                                        <span class="badge badge-outline badge-sm">{{.}}</span>
                                        {{end}}
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    {{if .SrcURLs}}
                    <div class="mt-4">
                        <h3 class="font-bold">Source Code</h3>
                        <ol class="list-decimal list-inside">
                            {{range .SrcURLs}}
                            <li><a href="{{.}}" class="link link-primary break-all">{{.}}</a></li>
                            {{end}}
                        </ol>
                    </div>
                    {{end}}

                    {{if .WebURLs}}
                    <div class="mt-4">
                        <h3 class="font-bold">Website</h3>
                        <ol class="list-decimal list-inside">
                            {{range .WebURLs}}
                            <li><a href="{{.}}" class="link link-primary break-all">{{.}}</a></li>
                            {{end}}
                        </ol>
                    </div>
                    {{end}}
                </div>
            </div>
        </div>

        <div class="lg:col-span-3">
            <div class="card bg-base-200 shadow-lg">
                <div class="card-body">
                    <h2 class="card-title">Description</h2>
                    <p class="whitespace-pre-line">{{.Description}}</p>
                </div>
            </div>
        </div>

        <div class="lg:col-span-3">
            <div class="card bg-base-200 shadow-lg">
                <div class="card-body">
                    <h2 class="card-title">Installation</h2>
                    <div class="alert alert-info shadow-lg">
                        <span>‚ÑπÔ∏è Install using dbin</span>
                        <div class="text-xs">Make sure you have dbin installed on your system</div>
                    </div>
                    <div class="mockup-code">
                        <pre data-prefix="$"><code>dbin install {{.Name}}#{{.PkgId}}</code></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{{ end }}
